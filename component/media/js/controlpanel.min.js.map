{"version":3,"file":"controlpanel.min.js","names":["akeeba","DataCompliance","ControlPanel","loadUserGraphs","ajaxUrl","Joomla","getOptions","request","url","method","perform","onSuccess","rawJson","data","JSON","parse","ctx","document","getElementById","getContext","Chart","type","labels","Text","_","datasets","expired","active","deleted","backgroundColor","borderWidth","options","cutout","plugins","legend","display","loadWipedGraphs","label","user","admin","lifecycle","scales","x","stacked","time","unit","distribution","y","ticks","callback","value","position"],"sources":["controlpanel.js"],"sourcesContent":["/**\n * @package   AkeebaDataCompliance\n * @copyright Copyright (c)2018-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\"use strict\";\n\nif (typeof (akeeba) === \"undefined\")\n{\n    var akeeba = {};\n}\n\nif (typeof (akeeba.DataCompliance) === \"undefined\")\n{\n    akeeba.DataCompliance = {};\n}\n\nakeeba.DataCompliance.ControlPanel = {};\n\nakeeba.DataCompliance.ControlPanel.loadUserGraphs = function ()\n{\n    const ajaxUrl = Joomla.getOptions(\"com_datacompliance.controlpanel.userGraphsUrl\");\n\n    Joomla.request({\n        url:       ajaxUrl,\n        method:    \"GET\",\n        perform:   true,\n        onSuccess: rawJson =>\n                   {\n                       const data    = JSON.parse(rawJson);\n                       const ctx     = document.getElementById(\"adcExpiredUsers\").getContext(\"2d\");\n\n                       new Chart(ctx, {\n                           type:    \"doughnut\",\n                           data:    {\n                               labels:   [\n                                   Joomla.Text._(\"COM_DATACOMPLIANCE_CONTROLPANEL_LBL_CHART_INACTIVE\"),\n                                   Joomla.Text._(\"COM_DATACOMPLIANCE_CONTROLPANEL_LBL_CHART_ACTIVE\"),\n                                   Joomla.Text._(\"COM_DATACOMPLIANCE_CONTROLPANEL_LBL_CHART_DELETED\"),\n                               ],\n                               datasets: [\n                                   {\n                                       data:            [\n                                           data.expired, data.active, data.deleted\n                                       ],\n                                       backgroundColor: [\n                                           \"#ff0000\",\n                                           \"#009900\",\n                                           \"#666666\"\n                                       ],\n                                       borderWidth:     6\n                                   }\n                               ]\n                           },\n                           options: {\n                               cutout:  \"50%\",\n                               plugins: {\n                                   legend: {\n                                       display: false\n                                   }\n                               }\n                           }\n                       });\n                   }\n    });\n};\n\nakeeba.DataCompliance.ControlPanel.loadWipedGraphs = function ()\n{\n    const ajaxUrl = Joomla.getOptions(\"com_datacompliance.controlpanel.wipedGraphsUrl\");\n\n    Joomla.request({\n        url:       ajaxUrl,\n        method:    \"GET\",\n        perform:   true,\n        onSuccess: rawJson =>\n                   {\n                       const data  = JSON.parse(rawJson);\n                       const ctx     = document.getElementById(\"adcWipedUsers\").getContext(\"2d\");\n\n                       new Chart(ctx, {\n                           type:    \"bar\",\n                           data:    {\n                               datasets: [\n                                   {\n                                       label:           Joomla.Text._('COM_DATACOMPLIANCE_CONTROLPANEL_LBL_CHART_USER'),\n                                       backgroundColor: \"#009900\",\n                                       data:            data.user\n                                   },\n                                   {\n                                       label:           Joomla.Text._('COM_DATACOMPLIANCE_CONTROLPANEL_LBL_CHART_ADMIN'),\n                                       backgroundColor: \"#ff0000\",\n                                       data:            data.admin\n                                   },\n                                   {\n                                       label:           Joomla.Text._('COM_DATACOMPLIANCE_CONTROLPANEL_LBL_CHART_LIFECYCLE'),\n                                       backgroundColor: \"#666666\",\n                                       data:            data.lifecycle\n                                   },\n                               ],\n                           },\n                           options: {\n                               scales:  {\n                                   x: {\n                                       stacked:      true,\n                                       type:         \"time\",\n                                       time:         {\n                                           unit: \"day\"\n                                       },\n                                       distribution: \"linear\"\n                                   }\n                                   ,\n                                   y: {\n                                       type:    \"linear\",\n                                       stacked: true,\n                                       ticks:   {\n                                           callback: function (value, index, values)\n                                                     {\n                                                         return \"\" + value;\n                                                     }\n                                       }\n                                   }\n                               },\n                               plugins: {\n                                   legend: {\n                                       display:  true,\n                                       position: \"right\"\n                                   }\n                               }\n                           }\n                       });\n                   }\n    });\n};\n\nakeeba.DataCompliance.ControlPanel.loadUserGraphs();\nakeeba.DataCompliance.ControlPanel.loadWipedGraphs();"],"mappings":"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"}